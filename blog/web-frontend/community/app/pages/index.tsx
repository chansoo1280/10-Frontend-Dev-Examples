import { Tags, Tabs, Breadcrumbs } from "@Components"
import { Tag } from "@Components/Molecules/Tags"
import { Tab } from "@Components/Molecules/Tabs"
import Head from "next/head"
import { useState } from "react"

const Home = () => {
    const [tagList, setTagList] = useState<Tag[]>([
        { title: "Tag 1", checked: false, type: "checkable" },
        { title: "Tag 2", type: "deletable" },
    ])
    const [activeIdx, setActiveIdx] = useState(0)
    const [tabList, _] = useState([{ title: "Tab 1" }, { title: "Tab 2" }])
    const onClickTab = (tab: Tab, idx: number) => {
        setActiveIdx(idx)
    }
    const onAdd = (title: string) => {
        if (tagList.find((tag) => tag.title === title)) {
            return
        }
        setTagList(
            tagList.concat({
                title,
                type: "deletable",
            }),
        )
    }
    const onClick = (tag: Tag) => {
        if (tag.type === "checkable") {
            setTagList(
                tagList.map((item) =>
                    item.title === tag.title
                        ? {
                              ...item,
                              checked: !tag.checked,
                          }
                        : item,
                ),
            )
        } else if (tag.type === "deletable") {
            setTagList(tagList.filter((item) => item.title !== tag.title))
        }
    }
    return (
        <>
            <Head>
                <title>Create Next App</title>
                <meta name="description" content="Generated by create next app" />
                <meta name="viewport" content="width=device-width, initial-scale=1" />
                <link rel="icon" href="/favicon.ico" />
            </Head>
            <div>
                <Breadcrumbs breadcrumbList={[{ title: "main" }, { title: "main2", href: "#a" }]}></Breadcrumbs>
                <Tabs activeIdx={activeIdx} onClick={onClickTab} tabList={tabList} />
                <Tags onAdd={onAdd} onClick={onClick} tagList={tagList} />
            </div>
        </>
    )
}

export default Home
